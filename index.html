<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Golf Tee Time Booking</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: #f8fafc;
      font-family: 'Inter', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .modal-content {
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.12);
    }
    .calendar-container {
      max-width: 450px;
      margin: 50px auto;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
      padding: 32px;
    }
    .fc .fc-daygrid-day-number {
      font-weight: 600;
      color: #222;
    }
    .fc-daygrid-day {
      position: relative;
      height: 80px !important;
      vertical-align: top;
      cursor: pointer;
      transition: background 0.2s;
    }
    .fc-daygrid-day:hover {
      background: #e6f7ee;
    }
    .price-badge {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      background: #2d8f4e;
      color: #fff;
      border-radius: 12px;
      padding: 2px 10px;
      font-size: 0.85em;
      font-weight: 500;
      opacity: 0.93;
      pointer-events: none;
    }
    .fc .fc-toolbar-title {
      font-size: 1.6em;
      font-weight: 700;
      color: #2d8f4e;
      letter-spacing: -1px;
    }
    .fc-theme-standard .fc-scrollgrid {
      border-radius: 12px;
      border: none;
    }
    .tee-times-list {
      margin-top: 32px;
      background: #f7faf9;
      border-radius: 12px;
      padding: 18px 24px;
      box-shadow: 0 2px 10px rgba(45,143,78,0.04);
    }
    .tee-time-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #e6e6e6;
    }
    .tee-time-row:last-child {
      border-bottom: none;
    }
    .book-btn {
      background: #2d8f4e;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 6px 16px;
      font-size: 1em;
      font-weight: 500;
      transition: background 0.2s;
    }
    .book-btn:hover {
      background: #1e6232;
    }
  </style>
</head>
<body>

<!-- Course Selection Modal -->
<div class="modal fade" id="courseModal" tabindex="-1" aria-labelledby="courseModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header border-0">
        <h5 class="modal-title w-100 text-center" id="courseModalLabel">Select Your Course</h5>
      </div>
      <div class="modal-body d-flex justify-content-around align-items-center" style="gap: 24px;">
        <button class="btn btn-outline-success btn-lg px-4" onclick="selectCourse('9')">9 Holes</button>
        <button class="btn btn-success btn-lg px-4" onclick="selectCourse('18')">18 Holes</button>
      </div>
    </div>
  </div>
</div>

<div class="calendar-container">
  <h2 class="text-center mb-4" style="color:#2d8f4e;">Book Your Tee Time</h2>
  <div id="calendar"></div>
  <div id="tee-times" class="tee-times-list" style="display:none;"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
<script>
  // Example tee time data for both courses
  const teeTimesData = {
    '9': {
      "2025-06-01": [
        { time: "08:00", price: 35 },
        { time: "10:00", price: 40 }
      ],
      "2025-06-02": [
        { time: "09:00", price: 32 },
        { time: "11:30", price: 38 }
      ],
      "2025-06-04": [
        { time: "07:30", price: 30 },
        { time: "12:00", price: 36 }
      ]
    },
    '18': {
      "2025-06-01": [
        { time: "08:30", price: 60 },
        { time: "10:30", price: 65 }
      ],
      "2025-06-03": [
        { time: "09:15", price: 55 },
        { time: "13:00", price: 58 }
      ],
      "2025-06-04": [
        { time: "08:00", price: 50 },
        { time: "12:30", price: 52 }
      ]
    }
  };

  let selectedCourse = null;
  let calendar;

  // Show modal on load
  window.onload = function() {
    const courseModal = new bootstrap.Modal(document.getElementById('courseModal'), {backdrop: 'static', keyboard: false});
    courseModal.show();
  };

  function selectCourse(course) {
    selectedCourse = course;
    bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
    renderCalendar();
  }

  function getCheapestPrice(dateStr) {
    const slots = teeTimesData[selectedCourse][dateStr];
    if (!slots || slots.length === 0) return null;
    return Math.min(...slots.map(slot => slot.price));
  }

  function renderCalendar() {
    const calendarEl = document.getElementById('calendar');
    calendarEl.innerHTML = ""; // Clear previous calendar

    calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      selectable: true,
      height: 500,
      headerToolbar: {
        left: 'prev',
        center: 'title',
        right: 'next'
      },
      dayCellContent: function(arg) {
        // Show date number
        let html = `<div>${arg.dayNumberText}</div>`;
        // Show price badge if available
        const dateStr = arg.date.toISOString().slice(0,10);
        const price = getCheapestPrice(dateStr);
        if (price !== null) {
          html += `<div class="price-badge">from £${price}</div>`;
        }
        return { html };
      },
      dateClick: function(info) {
        const dateStr = info.dateStr;
        showTeeTimes(dateStr);
      },
      datesSet: function() {
        // Hide tee times when navigating calendar
        document.getElementById('tee-times').style.display = 'none';
      }
    });

    calendar.render();
  }

  function showTeeTimes(dateStr) {
    const teeTimesDiv = document.getElementById('tee-times');
    const slots = teeTimesData[selectedCourse][dateStr];
    teeTimesDiv.innerHTML = `<h4 class="mb-3" style="color:#2d8f4e;">${new Date(dateStr).toLocaleDateString(undefined, {weekday:'long', year:'numeric', month:'long', day:'numeric'})}</h4>`;
    if (!slots || slots.length === 0) {
      teeTimesDiv.innerHTML += `<div class="text-muted">No tee times available for this date.</div>`;
    } else {
      slots.forEach(slot => {
        teeTimesDiv.innerHTML += `
          <div class="tee-time-row">
            <div><span style="font-size:1.1em;font-weight:600;">${slot.time}</span> &nbsp; <span class="text-success" style="font-weight:500;">£${slot.price}</span></div>
            <button class="book-btn" onclick="bookSlot('${dateStr}','${slot.time}',${slot.price})">Book</button>
          </div>
        `;
      });
    }
    teeTimesDiv.style.display = 'block';
    // Scroll to tee times
    teeTimesDiv.scrollIntoView({behavior:'smooth'});
  }

  function bookSlot(date, time, price) {
    alert(`Booked ${selectedCourse}-hole tee time on ${date} at ${time} for £${price}`);
    // Here, you can integrate with your backend or Voiceflow API
  }
</script>
</body>
</html>